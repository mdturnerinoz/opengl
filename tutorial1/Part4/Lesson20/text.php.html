<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
	<title>OpenGL Video Tutorial - Materials</title>
	<meta name="title" content="OpenGL Video Tutorial - Materials">
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<meta name="description" content="Free beginner-friendly OpenGL / GLUT tutorial for C++, including both video and text versions.">
	<meta name="keywords" content="OpenGL, GLUT, OpenGL tutorial, OpenGL tutorials, free, GLUT tutorial, GLUT tutorials, OpenGL video tutorial, OpenGL video tutorials, video, videos, GLUT video tutorial, GLUT video tutorials, video tutorial, video tutorials, 3D, 3-D, Windows, Mac, OS X, Mac OS X, MacOSX, Linux, C, C++, Visual C++, programming, 3D programming, 3-D programming, reference, forum, forums">
	<meta name="author" content="Bill Jacobs">
	<meta name="designer" content="Bill Jacobs">
	<meta name="copyright" content="© 2007 - 2008 Bill Jacobs">
	<link href="text.php_files/styles.css" rel="stylesheet" type="text/css">
	<!--[if lte IE 6]>
		<style type="text/css">
			#container {
				width: expression(document.documentElement.clientWidth < 808 ? "808px" : "auto");
			}
		</style>
	<![endif]-->
	<!--[if gte IE 5]>
		<style type="text/css">
			#topads {
				width: expression(document.body.clientWidth > 160 ? "160px" : "auto");
			}
		</style>
	<![endif]-->
</head>

<body bgcolor="#B0E0FF">
<div id="container">
	<div id="header">
		<img src="text.php_files/top_icon.png" alt="3D Video Tutorials Rock.com logo" height="101" width="165"><h1>OpenGL tutorial</h1>
	</div>
	
	<div id="menu1">
		<ul>
			<li><a href="http://www.videotutorialsrock.com/index.php">Home</a></li><li><a href="http://www.videotutorialsrock.com/intro.php">Intro</a></li><li><a href="http://www.videotutorialsrock.com/forums/" target="_blank">Forums</a></li><li><a href="http://www.videotutorialsrock.com/opengl_tutorial/reference.php">Reference</a></li>
		</ul>
	</div>
	
	<div id="content">
		<div id="mainbody">

<center><h1>Lesson 20: Materials</h1></center>
<center><div class="lessonlinks">
	<div class="watchnow"><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/video.php">Watch the video now!</a></div>
	<ul>	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/home.php">Summary</a></li><li>*</li>
	<li>Text version</li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/exercises.php">Exercises</a></li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/materials.zip">Download source</a></li></ul>
</div></center>
<center><div class="horizontaladslong">
	<script type="text/javascript"><!--
google_ad_client = "pub-9144854455296170";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "A0A0A0";
google_color_bg = "B8FFB8";
google_color_link = "000080";
google_color_text = "800000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="text.php_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_0" name="aswift_0" style="left: 0pt; position: absolute; top: 0pt;" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins>
</div></center>
<center><h2>Materials</h2></center>
<p>
We've already seen how to light objects in OpenGL, and I'm going to 
explain how to use materials to specify in more detail how an object is 
lit.
</p><p>
Run and take a look at <a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/materials.zip">the program for this lesson</a>.  It shows a lit, spinning sphere.  It has a little shininess, which is new, as shown in the below screenshot:
</p>
<center><img src="text.php_files/screenshot.png" alt="Materials program screenshot" border="3" height="434" width="408"></center>
<p>
You can use the 's', 'p', and 'e' keys to toogle some of the parameters 
in the "material" of the sphere, that is, how it's lit.  Try it out.  
Using the 's' key, you can toggle whether the shininess is more 
concentrated or whether it covers a larger area.  Using the 'p' key, you
 can toggle between a lot of shininess and almost no shininess.  Using 
the 'e' key, you can toggle whether the shpere "emits" a grayish color, 
so that it is lighter and more grayish.
</p>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-9144854455296170";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "A0A0A0";
google_color_bg = "B8FFB8";
google_color_link = "000080";
google_color_text = "800000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="text.php_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_1" name="aswift_1" style="left: 0pt; position: absolute; top: 0pt;" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins>
</center>

<center><h2>The Code</h2></center>
<p>
On to the code.
</p><div class="codeblock"><pre><span class="codekeyword">bool</span> _highShininess = false; <span class="codecomment">//Whether the shininess parameter is high</span>
<span class="codekeyword">bool</span> _lowSpecularity = false; <span class="codecomment">//Whether the specularity parameter is high</span>
<span class="codekeyword">bool</span> _emission = false; <span class="codecomment">//Whether the emission parameter is turned on</span>

<span class="codekeyword">void</span> handleKeypress(<span class="codekeyword">unsigned</span> <span class="codekeyword">char</span> key, <span class="codekeyword">int</span> x, <span class="codekeyword">int</span> y) {
    <span class="codekeyword">switch</span> (key) {
        <span class="codekeyword">case</span> 27: <span class="codecomment">//Escape key</span>
            exit(0);
            <span class="codekeyword">break</span>;
        <span class="codekeyword">case</span> 's':
            _highShininess = !_highShininess;
            <span class="codekeyword">break</span>;
        <span class="codekeyword">case</span> 'p':
            _lowSpecularity = !_lowSpecularity;
            <span class="codekeyword">break</span>;
        <span class="codekeyword">case</span> 'e':
            _emission = !_emission;
            <span class="codekeyword">break</span>;
    }
}</pre></div><p>
We have three variables, <kbd>_highShininess</kbd>, <kbd>_lowSpecularity</kbd>, and <kbd>_emission</kbd>,
 which are toggled with the 's', 'p', and 'e' keys.  These are used for 
some of the parameters with the material, as we'll see later.
</p><div class="codeblock"><pre><span class="codekeyword">void</span> initRendering() {
    <span class="codecomment">//...</span>
    <span class="codecomment">//Disable color materials, so that glMaterial calls work</span>
    glDisable(GL_COLOR_MATERIAL);
}</pre></div><p>
We'll have to disable <kbd>GL_COLOR_MATERIAL</kbd> for the calls to <kbd>glMaterialfv</kbd> and <kbd>glMaterialf</kbd> that we'll see later to work.
</p><div class="codeblock"><pre><span class="codekeyword">void</span> drawScene() {
    <span class="codecomment">//...</span>
    
    GLfloat ambientLight[] = {0.2f, 0.2f, 0.2f, 1.0f};
    glLightModelfv(GL_LIGHT_MODEL_AMBIENT, ambientLight);
    
    GLfloat lightColor[] = {0.6f, 0.6f, 0.6f, 1.0f};
    GLfloat lightPos[] = {1.5f * RADIUS, 2 * RADIUS, 1.5 * RADIUS, 1.0f};
    <span class="codecomment">//Diffuse (non-shiny) light component</span>
    glLightfv(GL_LIGHT0, GL_DIFFUSE, lightColor);
    <span class="codecomment">//Specular (shiny) light component</span>
    glLightfv(GL_LIGHT0, GL_SPECULAR, lightColor);
    glLightfv(GL_LIGHT0, GL_POSITION, lightPos);</pre></div><p>
Here, we set up the lighting.  We've already seen how to set up ambient light, and we've seen calls to <kbd>glLightfv</kbd> with <kbd>GL_DIFFUSE</kbd> and <kbd>GL_POSITION</kbd>, but the call to <kbd>glLightfv</kbd> with <kbd>GL_SPECULAR</kbd>
 is new.  It sets up the specular, or shiny, color and intensity for the
 light.  We'll set it to be the same as the diffuse intensity.  (Diffuse
 lighting is the "ordinary" lighting that we've already seen.)
</p><div class="codeblock"><pre>    <span class="codecomment">//Determine the specularity, emissivity, and shininess parameters, based on</span>
    <span class="codecomment">//variables that can be toggled with keystrokes</span>
    <span class="codekeyword">float</span> specularity;
    <span class="codekeyword">if</span> (_lowSpecularity) {
        specularity = 0.3f;
    }
    <span class="codekeyword">else</span> {
        specularity = 1;
    }
    
    <span class="codekeyword">float</span> emissivity;
    <span class="codekeyword">if</span> (_emission) {
        emissivity = 0.05f;
    }
    <span class="codekeyword">else</span> {
        emissivity = 0;
    }
    
    <span class="codekeyword">float</span> shininess;
    <span class="codekeyword">if</span> (_highShininess) {
        shininess = 25;
    }
    <span class="codekeyword">else</span> {
        shininess = 12;
    }</pre></div><p>
Now, we set some variables, based on the toggleable booleans.
</p><div class="codeblock"><pre>    <span class="codecomment">//The color of the sphere</span>
    GLfloat materialColor[] = {0.2f, 0.2f, 1.0f, 1.0f};
    <span class="codecomment">//The specular (shiny) component of the material</span>
    GLfloat materialSpecular[] = {specularity, specularity, specularity, 1.0f};
    <span class="codecomment">//The color emitted by the material</span>
    GLfloat materialEmission[] = {emissivity, emissivity, emissivity, 1.0f};
    
    glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, materialColor);
    glMaterialfv(GL_FRONT, GL_SPECULAR, materialSpecular);
    glMaterialfv(GL_FRONT, GL_EMISSION, materialEmission);
    glMaterialf(GL_FRONT, GL_SHININESS, shininess); <span class="codecomment">//The shininess parameter</span></pre></div><p>
Here, we set up the material for the sphere.  First, in the <kbd>materialColor</kbd>
 array, we have the sphere's color, which is (0.2, 0.2, 1), a blue 
color.  (As usual, the red, green, and blue components of the color are 
followed by a 1.)  Then, <kbd>materialSpecular</kbd> indicates the color
 intensity of the specularity, or shininess, of the material.  In this 
program, we use a white color.  You could actually use another color; 
for example, if you change the second and third elements to be 0, the 
shiny portion of the sphere looks red, as shown below:
</p>
<center><img src="text.php_files/redscreenshot.png" alt="Red specularity" border="3" height="434" width="408"></center>
<p>
The specularity of the object is the product of the specularity 
indicated by the material and the specularity indicated by the light.  
So in this case, the specularity is (<kbd>0.6f * specularity</kbd>, <kbd>0.6f * specularity</kbd>, <kbd>0.6f * specularity</kbd>).
</p><p>
Then, we have <kbd>materialEmission</kbd>, an array that indicates a 
color intensity "emitted" by the sphere.  If enabled by pressing the 'e'
 key, the sphere emits the color (0.05, 0.05, 0.05), so that it looks a 
little lighter and a little more grayish.
</p><p>
Having set up the arrays, we have to pass them on to OpenGL, using calls to <kbd>glMaterialfv</kbd> and <kbd>glMaterialf</kbd>.  First of all, you'll notice that in our calls to <kbd>glMaterialfv</kbd> and <kbd>glMaterialf</kbd>, the first parameter is always <kbd>GL_FRONT</kbd>.
  This tells OpenGL that we want to set the material lighting for 
polygons that are facing the light, that is, polygons whose normals are 
in the opposite direction of the light.  We're only setting the lighting
 for these polygons because we don't want the back side of the sphere to
 be lit.  (If you wanted to set the lighting for the back polygons, you 
could use <kbd>GL_BACK</kbd> or <kbd>GL_FRONT_AND_BACK</kbd> instead.)
</p><p>
We call <kbd>glMaterialfv</kbd> with <kbd>GL_AMBIENT_AND_DIFFUSE</kbd> to set the ambient and diffuse material colors.  You could set the two separately using <kbd>GL_AMBIENT</kbd> and <kbd>GL_DIFFUSE</kbd>, but it's so common to set them to the same value that OpenGL provides us with <kbd>GL_AMBIENT_AND_DIFFUSE</kbd>.  Then, we set the specular and emmisive parameters of the material using calls to <kbd>glMaterialfv</kbd> with <kbd>GL_SPECULAR</kbd> and <kbd>GL_EMMISSION</kbd> respectively.
</p><p>
Then, we set the <kbd>GL_SHININESS</kbd> parameter of the sphere.  If we
 set it to a high value, the shiny area of the sphere will be more 
concentrated, while if we set it to a low value, the shininess will 
cover a larger area.  The shininess has to lie between 0 and 128.
</p><div class="codeblock"><pre>    <span class="codecomment">//Draw the sphere</span>
    glutSolidSphere(RADIUS, 150, 80);</pre></div><p>
Now, we actually draw the sphere with a call to <kbd>glutSolidSphere</kbd>.  For those of you who haven't seen it before, <kbd>glutSolidSphere</kbd>
 draws a bunch of polygons to resemble a sphere whose radius is the 
first parameter.  The second and third parameters indicate the number of
 polygons that are used to draw the sphere.
</p><p>
So in this manner, using <kbd>glMaterialfv</kbd> and <kbd>glMaterialf</kbd>, we can set how an object is lit.
</p>









<p><i>Next is <a href="http://www.videotutorialsrock.com/opengl_tutorial/crab_pong_part/home.php">"Part 5: A Sample Game: Crab Pong"</a>.</i></p><center><div class="lessonlinks">
	<ul>	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/home.php">Summary</a></li><li>*</li>
	<li>Text version</li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/exercises.php">Exercises</a></li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/materials/materials.zip">Download source</a></li></ul>
</div></center>

		<center><div class="horizontaladslong">
<script type="text/javascript"><!--
google_ad_client = "pub-9144854455296170";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "A0A0A0";
google_color_bg = "B8FFB8";
google_color_link = "000080";
google_color_text = "800000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="text.php_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_2_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_2" name="aswift_2" style="left: 0pt; position: absolute; top: 0pt;" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins>
		</div></center>
	</div>
</div>

	<div id="footer">
		<ul>
			<li><a href="http://www.videotutorialsrock.com/index.php">Home</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/intro.php">Intro</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/forums/" target="_blank">Forums</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/reference.php">Quick Reference</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/links.php">Links</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/about.php">About</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/contact.php">Contact</a></li>
		</ul>
		<center><table><tbody><tr><td>
<a href="http://validator.w3.org/check/referer" target="_blank"><img src="text.php_files/valid_xhtml.png" alt="Valid XHTML" align="bottom" border="0" height="31" width="88"></a>
		</td><td><center><p>© 2007 - 2011 Bill Jacobs<br>"Rock on!" - Bill</p></center></td><td>
<a href="http://jigsaw.w3.org/css-validator/check/referer" target="_blank"><img src="text.php_files/valid_css.png" alt="Valid CSS" align="bottom" border="0" height="31" width="88"></a>
		</td></tr></tbody></table></center>
	</div>
</div>

<script src="text.php_files/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1957485-1";
urchinTracker();
</script>



</body></html>